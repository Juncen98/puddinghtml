<html>
<head>
<link href="mmres://user_interface_reference.css" rel="stylesheet" type="text/css">
<title>HASH</title>
</head>
<body bgcolor="#FFFFFF" text="#000000">
   <div id="Description">
   <table cellpadding="0" cellspacing="0" border="0" width="100%" class="main">
      <tr> 
         <td valign="top" class="name">HASH</td>
         <td valign="top" nowrap class="compatibility">&nbsp;</td>
      </tr>
      <tr>
         <td colspan="2" class="divider"><img src="dwres:18084" width="100%" height="1"></td>
      </tr>


    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Description</span>
<p>
Converts a variable-length string to a fixed-length string that can act as a "fingerprint" or unique identifier for the original string. It is not possible to convert the hash result back to the source string. 
</p>
    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Returns</span>
<p>
A string.
</p>
    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Category</span>
<p>
Conversion functions, Security functions, String functions
</p>
    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Function syntax</span><pre>Hash(string[, algorithm[, encoding]] )
</pre>    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">History</span>
<p>
ColdFusion&#160;MX&#160;7: Added the algorithm and encoding parameters.
</p>
    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Parameters</span>
<p>

</p>
    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Usage</span>
<p>
The result of this function is useful for comparison and validation. For example, you can store the hash of a password in a database without exposing the password. You can check the validity of the password by hashing the entered password and comparing the result with the hashed password in the database.
</p>

<p>
ColdFusion&#160;MX&#160;7 uses the Java Cryptography Extension (JCE) and installs a Sun Java 1.4.2 runtime that includes the Sun JCE default security provider. This provider includes the algorithms listed in the Parameters section. The JCE framework includes facilities for using other provider implementations; however, Macromedia cannot provide technical support for third-party security providers.
</p>

<p>
The encoding attrbute is normally not required. It provides a mechanism for generating identical hash values on systems with different default encodings. ColdFusion uses a default encoding of UTF-8 unless you modify the defaultCharset entry in the neo-runtime.xml file.
</p>
    </td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="CLEARSEPARATION">&nbsp;</td>
  </tr>
  <tr>
    <td valign="top" colspan="2" class="description"><span class="title">Example</span>
<p>
The following example lets you enter a password and compares the hashed password with a hash value saved in the SecureData table of the cfdocexamples database. This table has the following three entries: 
</p>

<p>
</p><div align="left">
<table border="1">
  <caption></caption>
  <tr align="center">    <th>&#160;</th>
    <th>&#160;</th>
</tr>
  <tr align="left">    <td>
<p>12</p></td>
    <td>
<p>abc</p></td>
</tr>
  <tr align="left">    <td>
<p>14</p></td>
    <td>
<p>def</p></td>
</tr>
  <tr align="left">    <td>
<p>15</p></td>
    <td>
<p>ghi</p></td>
</tr>
</table>
</div>
<p>
</p>
<pre>&lt;h3&gt;Hash Example&lt;/h3&gt;

&lt;!--- Do the following if the form is submitted. ---&gt;
&lt;cfif IsDefined(&quot;Form.UserID&quot;)&gt;

   &lt;!--- query the data base. ---&gt; 
   &lt;cfquery name = &quot;CheckPerson&quot; datasource = &quot;cfdocexamples&quot;&gt;
      SELECT PasswordHash
      FROM SecureData
      WHERE UserID = &lt;cfqueryparam value = &quot;#Form.userID#&quot;
         cfsqltype = &quot;CF_SQL_CHARVAR&quot;&gt; 
   &lt;/cfquery&gt;

   &lt;!--- Compare query PasswordHash field and the hashed form password
         and display the results. ---&gt;
   &lt;cfoutput&gt;
      &lt;cfif Hash(Form.password, &quot;SHA&quot;) is not checkperson.passwordHash&gt;
         User ID #Form.userID# or password is not valid. Try again.
      &lt;cfelse&gt;
         Password is valid for User ID #Form.userID#.
      &lt;/cfif&gt;
   &lt;/cfoutput&gt;
&lt;/cfif&gt;

&lt;!--- Form for entering ID and password. ---&gt;
&lt;form action=&quot;#CGI.SCRIPT_NAME#&quot; method=&quot;post&quot;&gt;
   &lt;b&gt;User ID: &lt;/b&gt;
   &lt;input type = &quot;text&quot; name=&quot;UserID&quot; &gt;&lt;br&gt;
   &lt;b&gt;Password: &lt;/b&gt;
   &lt;input type = &quot;text&quot; name=&quot;password&quot; &gt;&lt;br&gt;&lt;br&gt;
   &lt;input type = &quot;Submit&quot; value = &quot;Encrypt my String&quot;&gt;
&lt;/form&gt;
</pre>
         </td>
      </tr>
   </table>
   </div>
<div id="STRING">
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr>  
<td valign="top" class="name">STRING</td>
  <td valign="top" nowrap class="compatibility">&nbsp;</td>
  </tr>
  <tr>
  <td colspan="2" class="divider"><img src="dwres:18084" width="100%" height="1"></td>
  </tr>


<p>String to hash.</p>

  </td>
  </tr>
  </table>
</div>
<div id="ALGORITHM">
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr>  
<td valign="top" class="name">ALGORITHM</td>
  <td valign="top" nowrap class="compatibility">&nbsp;</td>
  </tr>
  <tr>
  <td colspan="2" class="divider"><img src="dwres:18084" width="100%" height="1"></td>
  </tr>


<p>(Optional) The algorithm to use to hash the string. ColdFusion MX installs a cryptography library with the following algorithms:</p><ul>

<li>CFMX_COMPAT: Generates a hash string identical to that generated by ColdFusion MX and ColdFusion MX 6.1 (default).</li>

<li>MD5: (Default) Generates a 32-character, hexadecimal string, using the MD5 algorithm (The algorithm used in ColdFusion MX and prior releases).</li>

<li>SHA: Generates a 28-character string using the Secure Hash Standard SHA-1 algorithm specified by Nation Institute of Standards and Technology (NIST) FIPS-180-2.</li>

<li>SHA-256: Generates a 44-character string using the SHA-256 algorithm specified by FIPS-180-2.</li>

<li>SHA-384: Generates a 64-character string using the SHA-384 algorithm specified by FIPS-180-2.</li>

<li>SHA-512: Generates an 88-character string using the SHA-1 algorithm specified by FIPS-180-2.</li>
</ul>

<p>If you install a security provider with additional cryptography algorithms, you can also specify any of its hashing algorithms.</p>

  </td>
  </tr>
  </table>
</div>
<div id="ENCODING">
<table border="0" cellspacing="0" cellpadding="0" width="100%">
<tr>  
<td valign="top" class="name">ENCODING</td>
  <td valign="top" nowrap class="compatibility">&nbsp;</td>
  </tr>
  <tr>
  <td colspan="2" class="divider"><img src="dwres:18084" width="100%" height="1"></td>
  </tr>


<p>(Optional; to use this attribute you must also specify the algorithm parameter) A string specifying the encoding to use when converting the string to byte data used by the hash algorithm. Must be a character encoding name recognized by the Java runtime. The default value is the value specified by the defaultCharset entry in the neo-runtime.xml file, which is normally UTF-8. Ignored when using the CFMX_COMPAT algorithm.</p>

  </td>
  </tr>
  </table>
</div>

  </body>
</html>
